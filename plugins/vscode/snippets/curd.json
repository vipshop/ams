{
    "ams.curd": {
        "prefix": "ams.curd",
        "body": [
            "<!DOCTYPE html>",
            "    <html>",
            "    <head>",
            "        <meta charset=\"utf-8\">",
            "        <title>首页</title>",
            "        <link rel=\"stylesheet\" href=\"https://h5rsc.vipstatic.com/ams/element-ui@2.11.1/theme-chalk/index.css\" />",
            "        <script src=\"https://h5rsc.vipstatic.com/ams/babel-polyfill/7.4.0/polyfill.min.js\"></script>",
            "        <script src=\"https://h5rsc.vipstatic.com/ams/vue@2.6.10.js\"></script>",
            "        <script src=\"https://h5rsc.vipstatic.com/ams/element-ui@2.11.1/index.js\"></script>",
            "        <script src=\"https://h5rsc.vipstatic.com/ams/ams@0.24.20.js\"></script>",
            "    </head>",
            "    <body>",
            "        <script>",
            "            ams.config({",
            "                resource: {",
            "                    api: {",
            "                        withCredentials: false",
            "                    }",
            "                }",
            "            });",
            "            ams.block('demo', {",
            "                resources: {",
            "                    demoResource: {",
            "                        api: {",
            "                            prefix: '//www.yournana.club/vipshop/',",
            "                            read: 'read',",
            "                            update: 'update',",
            "                            list: 'list',",
            "                            delete: 'delete',",
            "                            create: 'create',",
            "                            successCode: 0",
            "                        },",
            "                        fields: {",
            "                            id: {",
            "                                type: 'text',",
            "                                label: 'ID'",
            "                            },",
            "                            testText: {",
            "                                type: 'text',",
            "                                label: '名称'",
            "                            },",
            "                            testDate: {",
            "                                type: 'datetime',",
            "                                label: '创建时间'",
            "                            }",
            "                        }",
            "                    }",
            "                },",
            "                blocks: {",
            "                    listBlock: {",
            "                        events: {",
            "                            init: '@list',",
            "                            removeItem: '@confirm:确认删除吗? @delete @list',",
            "                            editItem: 'dialogBlock.show',",
            "                            addItem: 'dialogBlock.show'",
            "                        },",
            "                        style: {",
            "                            margin: '20px'",
            "                        },",
            "                        type: 'list',",
            "                        resource: 'demoResource',",
            "                        blocks: {},",
            "                        operations: {",
            "                            name: {",
            "                                slot: 'searchs',",
            "                                type: 'field',",
            "                                field: {",
            "                                    type: 'text',",
            "                                    props: {",
            "                                        'placeholder': '请输入名称',",
            "                                        'clearable': true",
            "                                    }",
            "                                },",
            "                                label: '名称'",
            "                            },",
            "                            list: {",
            "                                slot: 'searchs',",
            "                                type: 'button',",
            "                                label: '搜索',",
            "                                props: {",
            "                                    type: 'primary'",
            "                                },",
            "                                event: 'list:1'",
            "                            },",
            "                            editItem: {",
            "                                type: 'button',",
            "                                label: '编辑',",
            "                                props: {",
            "                                    type: 'primary',",
            "                                    size: 'mini'",
            "                                }",
            "                            },",
            "                            removeItem: {",
            "                                type: 'button',",
            "                                label: '删除',",
            "                                props: {",
            "                                    type: 'danger',",
            "                                    size: 'mini'",
            "                                }",
            "                            },",
            "                            addItem: {",
            "                                type: 'button',",
            "                                label: '新建',",
            "                                props: {",
            "                                    type: 'primary'",
            "                                },",
            "                                slot: 'searchs'",
            "                            }",
            "                        }",
            "                    },",
            "                    dialogBlock: {",
            "                        data: {",
            "                            title: '标题'",
            "                        },",
            "                        props: {",
            "                            'append-to-body': true",
            "                        },",
            "                        type: 'dialog',",
            "                        blocks: {",
            "                            formBlock: {",
            "                                ctx: 'edit',",
            "                                type: 'form',",
            "                                resource: 'demoResource',",
            "                                events: {",
            "                                    'init': '@initForm @clearReturn',",
            "                                    submit: '@validate @update @clear dialogBlock.hide'",
            "                                },",
            "                                operations: {",
            "                                    submit: {",
            "                                        type: 'button',",
            "                                        label: '提交',",
            "                                        props: {",
            "                                            type: 'primary'",
            "                                        }",
            "                                    }",
            "                                },",
            "                                actions: {",
            "                                    initForm: function(args) {",
            "                                        var id = args.$prevReturn && args.$prevReturn.id;",
            "                                        id && this.callAction('@read', {",
            "                                            id",
            "                                        })",
            "                                    },",
            "                                    clear: function() {",
            "                                        this.data = {}",
            "                                    }",
            "                                }",
            "                            }",
            "                        }",
            "                    }",
            "                }",
            "            });",
            "            ams.render('demo')",
            "        </script>",
            "    </body>",
            "</html>"
        ],
        "description": "AMS的CURD片段"
  }
}