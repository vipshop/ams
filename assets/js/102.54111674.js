(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{1320:function(t,e,o){"use strict";o.r(e);var a=o(23),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"案例教程"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#案例教程"}},[t._v("#")]),t._v(" 案例教程")]),t._v(" "),o("p",[t._v("本页将会手把手教你构建一个SPA单页面应用，涉及区块包含"),o("RouterLink",{attrs:{to:"/block/router.html#/"}},[t._v("Router")]),t._v("、"),o("RouterLink",{attrs:{to:"/block/list.html"}},[t._v("List")]),t._v("、"),o("RouterLink",{attrs:{to:"/block/form.html"}},[t._v("Form")]),t._v("、"),o("RouterLink",{attrs:{to:"/block/dialog.html"}},[t._v("Dialog")])],1),t._v(" "),o("h2",{attrs:{id:"第一步-配置资源"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#第一步-配置资源"}},[t._v("#")]),t._v(" 第一步：配置资源")]),t._v(" "),o("p",[t._v("这一步首先设置"),o("RouterLink",{attrs:{to:"/api/resource.html"}},[t._v("resource")]),t._v("，api的接口规范可以查看"),o("RouterLink",{attrs:{to:"/api/api.html#通用数据结构"}},[t._v("接口api规范")]),t._v("，这里可以看到设置了用于接口的api和字段的属性fields")],1),t._v(" "),o("ClientOnly",[o("try-demo-spa-demo",{attrs:{blockName:"demoResource"}})],1),t._v(" "),o("h2",{attrs:{id:"第二步-基础列表"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#第二步-基础列表"}},[t._v("#")]),t._v(" 第二步：基础列表")]),t._v(" "),o("p",[t._v("开始配置可以展示的列表页（基础展示）")]),t._v(" "),o("p",[t._v("使用"),o("RouterLink",{attrs:{to:"/block/list.html"}},[t._v("list")]),t._v("可以配置一个列表页的区块，这里通过区块list的resource参数名字对应注册resource的名字，即可在list区块中使用字段的属性，所以可以看到表头都是resource的label")],1),t._v(" "),o("p",[t._v("这里的"),o("RouterLink",{attrs:{to:"/api/action.html"}},[t._v("events")]),t._v("设置了"),o("code",[t._v("{ init: '@list' }")]),t._v("。在初始化block时，会自动执行events中的init事件，这里执行的是"),o("code",[t._v("@list")]),t._v("，会匹配注册resource中名为"),o("code",[t._v("demoResource")]),t._v("中，自动加载"),o("code",[t._v("prefix")]),t._v("+"),o("code",[t._v("list")]),t._v("的链接，即发送"),o("code",[t._v("http://rap2api.taobao.org/app/mock/231578/ams/mock/ams-page-demo/getList")]),t._v("请求，拿到数据后会设置在区块list的"),o("code",[t._v("data")]),t._v("中")],1),t._v(" "),o("ClientOnly",[o("try-demo-spa-demo",{attrs:{blockName:"demoBlock1",onlineDemo:"https://codepen.io/w3cmark/pen/GRKdpzo"}})],1),t._v(" "),o("h2",{attrs:{id:"第三步-搜索与删除"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#第三步-搜索与删除"}},[t._v("#")]),t._v(" 第三步：搜索与删除")]),t._v(" "),o("p",[t._v("搜索的功能需要涉及配置"),o("RouterLink",{attrs:{to:"/api.html#operations"}},[t._v("operations")]),t._v("，将"),o("code",[t._v("slot")]),t._v("设置为"),o("code",[t._v("searchs")]),t._v("，就会展示在搜索栏中。如果搜索项太多可以试试type为"),o("code",[t._v("dropdown")]),t._v("的类型")],1),t._v(" "),o("p",[t._v("打开控制台，点击删除的时候，实际是从"),o("code",[t._v("operations")]),t._v("的"),o("code",[t._v("removeItem")]),t._v("中触发动作，会先查找"),o("code",[t._v("events")]),t._v("中的同名事件，此时可以找到"),o("code",[t._v('"removeItem": "@confirm:确认删除吗? @deleteAction @delete init"')]),t._v("（如果action的方法设置了async则支持同步执行），可以看到会先弹出"),o("code",[t._v("确认删除吗?")]),t._v("的弹窗，点击确认后执行"),o("code",[t._v("deleteAction")]),t._v("的action，在方法里会同时带上该行数据和前一个方法返回的数据，所以在控制台能捕获到删除的id，然后执行"),o("code",[t._v("@delete")]),t._v("方法，会去查找注册resource中配置的delete，匹配结果会发起"),o("code",[t._v("http://rap2api.taobao.org/app/mock/231578/ams/mock/ams-page-demo/delete")]),t._v("的请求，最后执行"),o("code",[t._v("@init")]),t._v("，也就是刷新列表")]),t._v(" "),o("ClientOnly",[o("try-demo-spa-demo",{attrs:{blockName:"demoBlock2",onlineDemo:"https://codepen.io/w3cmark/pen/qBWYbWe"}})],1),t._v(" "),o("h2",{attrs:{id:"第四步-新增与编辑"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#第四步-新增与编辑"}},[t._v("#")]),t._v(" 第四步：新增与编辑")]),t._v(" "),o("p",[t._v("继续完善列表页，让它带有查询、删除按钮、新增按钮、编辑按钮，点击"),o("code",[t._v("新增按钮")]),t._v("的时候可以弹出一个空的弹窗，点击"),o("code",[t._v("编辑按钮")]),t._v("的时候，可以带上列表的内容。在新增弹窗是，因为没有"),o("code",[t._v("id")]),t._v(" "),o("code",[t._v("create_time")]),t._v(" "),o("code",[t._v("update_time")]),t._v("三个字段，所以我们用了"),o("RouterLink",{attrs:{to:"/block/api.html#fields"}},[t._v("fields")]),t._v("的配置，可以重写注册resource对应的field配置")],1),t._v(" "),o("ClientOnly",[o("try-demo-spa-demo",{attrs:{blockName:"demoBlock3",onlineDemo:"https://codepen.io/w3cmark/pen/KKPRVpo"}})],1),t._v(" "),o("h2",{attrs:{id:"第五步-配置导航"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#第五步-配置导航"}},[t._v("#")]),t._v(" 第五步：配置导航")]),t._v(" "),o("p",[t._v("将上面完善的列表放入"),o("RouterLink",{attrs:{to:"/block/router.html#/"}},[t._v("导航Router")]),t._v("中，成为导航一个页面，点击首页可加载列表页面")],1),t._v(" "),o("ClientOnly",[o("try-demo-spa-demo",{attrs:{blockName:"demoBlock4",onlineDemo:"https://codepen.io/w3cmark/pen/zYOjrGb"}})],1)],1)}),[],!1,null,null,null);e.default=r.exports}}]);