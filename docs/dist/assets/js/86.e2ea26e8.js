(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{1244:function(t,e,a){"use strict";a.r(e);var n=a(390),s=a.n(n),i=(a(387),a(78)),r=(a(125),a(121),a(122),a(120),a(81),a(124),{resources:{data:{fields:{url:{type:"text",label:"地址",props:{placeholder:"如： http://localhost:9528/examples/admin/mock/read.json"}},and:{type:"text",ctx:"view"},text:{type:"textarea",props:{rows:10,placeholder:'如： {"data":{"select": "aaaa.bbb", "text": "hello"}}'},label:"数据"},ans:{label:"资源配置：",type:"textarea",props:{rows:10}}}}},blocks:{buttons:{type:"form",ctx:"view",events:{submit:"edit.submit",format:"edit.format",clear:"edit.clear"},operations:{submit:{label:"生成",type:"button",props:{type:"primary"}},format:{label:"格式化",type:"button"},clear:{label:"清空",type:"button"}}},edit:{type:"form",ctx:"edit",resource:"data",data:{and:"或"},style:{width:"100%"},actions:{getFields:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var a,n,s,i,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=JSON.parse(t.data.text)).data&&(a=a.data),n=[],Object.keys(a).forEach((function(t){n.push({name:t,type:"text"})})),e.next=7,t.$ams.request({url:"http://vip.com/getBayes",method:"post",data:{data:JSON.stringify(n)},withCredentials:!1});case 7:s=e.sent,i={},s.data.res.forEach((function(t){i[t.name]={label:t.name,type:t.res[0]}})),r={key:"id",api:{prefix:"/",read:""},fields:i},t.data.ans=JSON.stringify(r,null,4),delete(l=t.$ams).resources.new,l.resource("new",r),t.callAction("@preview.update"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),t.data.ans=e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()},submit:function(){var t=this;this.data.url?this.$ams.request({url:this.data.url,withCredentials:!1}).then((function(e){e.data.list&&Array.isArray(e.data.list)&&e.data.list.length>0?t.data.text=JSON.stringify(e.data.list[0],null,4):t.data.text=JSON.stringify(e.data,null,4),t.callAction("edit.getFields")})):this.data.text?this.callAction("edit.getFields"):this.data.ans="请输入url或者数据"},format:function(){try{if(this.data.text){var t=JSON.parse(this.data.text);this.data.text=JSON.stringify(t,null,4)}}catch(t){this.data.ans=t}},clear:function(){this.data.text="",this.data.url="",this.data.ans="",delete ams.resources.new,this.callAction("@preview.update")}}},preview:{type:"form",ctx:"edit",resource:"new",style:{width:"100%",marginTop:"40px",paddingTop:"40px",borderTop:"1px solid #eaecef"},actions:{update:function(){console.log("update"),this.initBlock()}}}}}),l={data:function(){return{init:!1}},mounted:function(){s.a&&s.a.blocks&&s.a.blocks.convent||s.a.block("convent",r),this.init=!0}},o=a(23),c=Object(o.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return this.init?e("ams-block",{staticClass:"demo convent",attrs:{name:"convent"}}):this._e()}),[],!1,null,null,null);e.default=c.exports},387:function(t,e,a){"use strict";var n=a(0),s=(a(393),a(392)),i=a.n(s),r=a(390),l=a.n(r),o=a(398),c=a(394),d=a.n(c),u=(a(395),a(396)),p=a.n(u),f=a(397),h=a.n(f);n.default.use(i.a),n.default.use(l.a),console.log("ams init config"),n.default.use(p.a),n.default.use(h.a),"undefined"!=typeof window&&(window.Vue=n.default),n.default.use(o.a,{languages:{javascript:d.a}}),l.a.config({resource:{api:{withCredentials:!1}}})}}]);